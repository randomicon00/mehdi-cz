---
title: "AI-Backed Policy-as-Code Compliance"
date: "2025-09-16"
tags: ["ai", "security", "compliance", "opa"]
draft: true
summary: "Codify rules with OPA/Conftest and use AI to explain failures and propose diffs."
---

Compliance that devs can run locally beats surprise audits.

## Conftest + Rego (example)

```rego
package ci
deny[msg] {
  input.resource.kind == "S3Bucket"
  not input.resource.encrypted
  msg := "S3 buckets must be encrypted"
}
```

```bash
conftest test infra/
```

## AI failure explainer (pseudo)

```bash
conftest test infra/ --output json | node scripts/ai-explain-compliance.mjs
```

## Why this matters

- Prevents drift and audit pain.
- Gives devs precise, actionable feedback.

## How to use this today

- Start with 5-10 high-signal rules.
- Wire into pre-commit and CI.
- Add AI summaries on failure to suggest compliant patches.

## Common pitfalls

- Overly broad rules creating noise; iterate to reduce false positives.
- Unowned policies; assign clear maintainers.
- No exception process; add time-bound waivers.

## What to try next

- Track policy coverage and failure rates over time.
- Add SAST/DAST gates for end-to-end risk.
- Map rules to standards (SOC2, ISO, HIPAA) for traceability.
